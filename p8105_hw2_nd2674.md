Homework 1
================
Nikhita Damaraju

This is my solution to Homework 2.

Library imports

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.3     ✓ dplyr   1.0.2
    ## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

# Problem 1

Read the Mr. Trashwheel dataset

``` r
trashwheel_df =
  read_xlsx(
    "./hw2_datasets/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "Mr. Trash Wheel",
    range = cell_cols("A:N")) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(
    sports_balls = round(sports_balls),   
    sports_balls = as.integer(sports_balls)
  )
```

Read and clean 2017 and 2018 precipitation data

``` r
precip_2017 =
  read_xlsx(
    "./hw2_datasets/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2017 Precipitation",
    skip = 1
  ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2017) %>%
  relocate(year)

precip_2018 =
  read_xlsx(
    "./hw2_datasets/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
  ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2018) %>%
  relocate(year)
```

Combining annual precipitation

``` r
month_df =
  tibble(
    month = 1:12,
    month_name = month.name
  )

precip_df =
  bind_rows(precip_2017, precip_2018)

precip_df = 
  left_join(precip_df, month_df, by = "month")
```

This dataset contains information from the Mr. Trashwheel trash
collector in Baltimore, Maryland. The dataset contains information on
year, month, and the type of trash collected. There are a total of 344
rows in the dataset. Additional data sheets include month precipitation
data. In this dataset:

  - The median number of sports balls found in a dumpster in 2017 was 8
  - The total precipitation in 2018 was 70.33 inches.

# Problem 2

Read the NYC Transit data

``` r
transit_df =
  read_csv("./hw2_datasets/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance_type, ada) %>%
  mutate(entry = ifelse(entry == "YES","TRUE", "FALSE"),
         entry = as.logical(entry)
  )
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

The dataset contains information about various trains in NYC and the
stations each train transits through. Variables of importance include,
stations, geographical coordinates of stations, route number and names
along with entry information. So far, the dataset has been filtered to
include 19 variables of importance and entry has been changed into a
logical variable. There are 1868 rows x 14 columns in the dataset.

Reformat route number and name as distinct variables

``` r
transit_df = 
  transit_df %>% 
  mutate_at(vars(matches("route")), replace_na, 'None') %>%
  mutate_at(vars(matches("route")),as.character())

transit_tidy_df = 
  pivot_longer(
    transit_df,
    route1:route11,
    names_to = "route_name",
    values_to = "route_number"
  )

## cleaning up route number by removing None values 
transit_tidy_df = filter(transit_tidy_df, route_number != "None")
```

# Problem 3

Reading datasets of interest in FiveThirtyEight data

``` r
## creating variable for month names and numbers

month_df =
  tibble(
    month_number = 01:12,
    month = month.name,
    month_abb = month.abb
  )

## reading pol dataset

pols_df =
  read_csv("./hw2_datasets/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month_number", "day"), sep = "-" ) %>%
  mutate(month_number = as.integer(month_number), year = as.integer(year), day = as.integer(day))
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
## adding month name to pols based on month number 

pols_df = 
  left_join(pols_df, month_df, by = "month_number") %>%
  mutate(
    president = case_when(
      prez_gop != 0 ~ "gop",
      prez_dem != 0 ~ "dem"
    )
  ) %>%
  select(-c(day, month_number, prez_gop, prez_dem, month_abb)) %>%
  relocate(year, month)


snp_df =
  read_csv("./hw2_datasets/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, into = c("month_number", "day", "year"), sep = "/" ) %>%
  mutate(month_number = as.integer(month_number), year = as.integer(year), day = as.integer(day)) 
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
snp_df = 
  left_join(snp_df, month_df, by = "month_number") %>% 
  select(-c(month_abb, month_number, day)) %>%
  relocate(year,month)

unemployment_df =
  read_csv("./hw2_datasets/fivethirtyeight_datasets/unemployment.csv")  %>%
  pivot_longer(
    Jan:Dec,
    names_to = "month_abb",
    values_to = "percentage"
  ) 
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
unemployment_df = 
  left_join(unemployment_df, month_df, by = "month_abb") %>% 
  select(-c(month_abb, month_number)) %>%
  relocate(Year,month) %>%
  janitor::clean_names()
```

Joining datasets

``` r
combine_df = left_join(pols_df, snp_df, by = c("year", "month"))

final_merged_df = left_join(combine_df, unemployment_df, by = c("year", "month"))
```
